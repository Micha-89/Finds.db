(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},138:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(92),c=n.n(s),o=n(9),l=(n(100),n(14)),r=n(10),d=n(11),u=n(13),h=n(12),j=(n(101),n(8)),p=n(31),b=n(30),m=n(4),g=n.n(m),f=(n(138),n(0));function x(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),i=n[0],s=n[1];var c=Object(a.useState)({latitude:e.user.latitude,longitude:e.user.longitude,width:"100%",height:"89vh",zoom:13}),r=Object(p.a)(c,2),d=r[0],u=r[1],h=Object(a.useState)({latitude:0,longitude:0}),j=Object(p.a)(h,2),m=j[0],x=j[1];var O=Object(a.useState)(null),v=Object(p.a)(O,2),y=v[0],C=v[1];return Object(f.jsx)("div",{children:Object(f.jsxs)(b.c,Object(l.a)(Object(l.a)({onLoad:function(){g.a.get("/api/locations").then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}},d),{},{mapboxApiAccessToken:"pk.eyJ1IjoibWljaGFicmxuIiwiYSI6ImNrbHVxY2hpazAyeWcydm82bWtqaGdtdmsifQ.RuTqJKRpG-dR8D9_KV5bHQ",onViewportChange:function(e){u(e)},mapStyle:"mapbox://styles/mapbox/satellite-v9",onClick:function(e){x({latitude:e.lngLat[1],longitude:e.lngLat[0]})},children:[i.length>0?i.filter((function(t){return t.owner===e.user._id})).map((function(e){return Object(f.jsx)(b.a,{latitude:e.latitude,longitude:e.longitude,offsetTop:-54,offsetLeft:-25,children:Object(f.jsx)("img",{src:"/pin.svg",alt:"marker",className:"markerButton",onClick:function(t){t.preventDefault(),C(e)}})},e._id)})):Object(f.jsx)(f.Fragment,{}),0!==m.longitude?Object(f.jsx)(b.b,{latitude:m.latitude,longitude:m.longitude,closeButton:!1,children:Object(f.jsxs)("div",{style:{margin:"12px"},children:[Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),g.a.post("/api/locations",{longitude:m.longitude,latitude:m.latitude,hunts:[]}).then((function(){x({latitude:0,longitude:0}),g.a.get("/api/locations").then((function(e){s(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:Object(f.jsx)("button",{className:"addLocationButton",type:"submit",children:"Add Location"})}),Object(f.jsx)("button",{className:"closePopUpButton",onClick:function(){return x({latitude:0,longitude:0})},children:"Close"})]})}):Object(f.jsx)(f.Fragment,{}),null!==y?Object(f.jsx)(b.b,{latitude:y.latitude,longitude:y.longitude,closeButton:!1,children:Object(f.jsxs)("div",{style:{margin:"12px"},children:[Object(f.jsxs)("p",{style:{marginBottom:"22px"},children:["Sessions: ",y.hunts.length]}),Object(f.jsx)(o.b,{className:"locationLink",to:"/locations/".concat(y._id),children:"Location details"}),0===y.hunts.length?Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),g.a.delete("/api/locations/".concat(y._id)).then((function(){C(null),g.a.get("/api/locations").then((function(e){s(e.data)}))})).catch((function(e){console.log(e)}))},children:Object(f.jsx)("button",{className:"closePopUpButton",type:"submit",children:"Delete location"})}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)("button",{className:"closePopUpButton",onClick:function(){return C(null)},children:"Close"})]})}):Object(f.jsx)(f.Fragment,{})]}))})}var O=n(41),v=(n(236),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={finds:[]},e.componentDidMount=function(){g.a.get("/api/finds").then((function(t){e.setState({finds:t.data})}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id})).length>0?Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{className:"findLinkWrapperAll",children:this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id})).reverse().map((function(e){return Object(f.jsxs)(o.b,{className:"findLink",to:"/finds/".concat(e._id),children:[Object(f.jsxs)("div",{className:"findLinkText",children:[Object(f.jsx)("p",{style:{fontSize:"22px",fontWeight:"bold"},children:e.objectType}),Object(f.jsx)("p",{style:{fontSize:"20px"},children:e.age})]}),Object(f.jsx)("img",{src:e.imageUrl,alt:"find"})]},e._id)}))}),Object(f.jsx)("div",{style:{padding:"100px"},children:Object(f.jsx)(O.Pie,{data:{labels:["uncertain","stone age","bronze age","iron age","roman","early medieval","medieval","post medieval","modern"],datasets:[{label:"Points",backgroundColor:["#f1c40f","#e67e22","#16a085","#2980b9","#78c4d4","#f5c0c0","#7868e6","#f14668","#c0e218"],data:[this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"uncertain"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"stone age"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"bronze age"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"iron age"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"roman"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"early medieval"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"medieval"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"post medieval"===t.age})).length,this.state.finds.filter((function(t){return t.location._id===e.props.match.params.id&&"modern"===t.age})).length]}]},height:400,width:600})})]}):Object(f.jsx)(f.Fragment,{})})}}]),n}(a.Component)),y=n(18),C=(n(237),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={objectType:"",age:"uncertain",description:"",imageUrl:"",fileInputValue:"",imageUploaded:!1,hunt:{},finds:[]},e.componentDidMount=function(){g.a.get("/api/hunts/".concat(e.props.match.params.sessionId)).then((function(t){e.setState({hunt:t.data,finds:t.data.finds})})).catch((function(e){console.log(e)}))},e.handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(y.a)({},n,a))},e.handleFileUpload=function(t){var n=new FormData;n.append("imageUrl",t.target.files[0]),g.a.post("/api/upload",n).then((function(t){return e.setState({imageUrl:t.data.secure_url,imageUploaded:!0})})).catch((function(e){console.log(e)}))},e.handleSubmit=function(t){if(t.preventDefault(),!1===e.state.imageUploaded||""===e.state.objectType)return console.log("please fill in all fields");g.a.post("/api/finds",{objectType:e.state.objectType,description:e.state.description,age:e.state.age,location:e.state.hunt.location,hunt:e.props.match.params.sessionId,imageUrl:e.state.imageUrl}).then((function(t){g.a.put("/api/hunts/".concat(e.props.match.params.sessionId),{find:t.data._id}).then((function(){g.a.get("/api/hunts/".concat(e.props.match.params.sessionId)).then((function(t){e.setState({hunt:t.data,finds:t.data.finds,objectType:"",age:"uncertain",description:"",imageUrl:"",imageUploaded:!1}),e.props.onReload()})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)}))},e.removeSession=function(){g.a.delete("/api/hunts/".concat(e.props.match.params.sessionId)).then(g.a.put("/api/locations/removeHunt/".concat(e.props.match.params.id),{hunt:e.props.match.params.sessionId}).then((function(){e.props.onReload(),e.props.history.push("/locations/".concat(e.props.match.params.id))})).catch((function(e){console.log(e)}))).catch((function(e){console.log(e)}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("form",{className:"findInput",onSubmit:this.handleSubmit,children:[void 0!==this.state.hunt.date?Object(f.jsxs)("p",{style:{height:"15px"},children:[this.state.hunt.date.split("T")[0].split("-").reverse().join("-")," ",this.state.hunt.date.split("T")[1]]}):Object(f.jsx)("p",{style:{height:"15px"}}),Object(f.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(f.jsx)("label",{htmlFor:"objectType",children:"Type"}),Object(f.jsx)("input",{type:"text",id:"objectType",name:"objectType",value:this.state.objectType,onChange:this.handleChange})]}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(f.jsx)("label",{htmlFor:"age",children:"Age"}),Object(f.jsxs)("select",{name:"age",id:"age",value:this.state.age,onChange:this.handleChange,children:[Object(f.jsx)("option",{value:"uncertain",children:"uncertain"}),Object(f.jsx)("option",{value:"stone age",children:"stone age"}),Object(f.jsx)("option",{value:"bronze age",children:"bronze age"}),Object(f.jsx)("option",{value:"iron age",children:"iron age"}),Object(f.jsx)("option",{value:"roman",children:"roman"}),Object(f.jsx)("option",{value:"early medieval",children:"early medieval"}),Object(f.jsx)("option",{value:"medieval",children:"medieval"}),Object(f.jsx)("option",{value:"post medieval",children:"post medieval"}),Object(f.jsx)("option",{value:"modern",children:"modern"})]})]})]}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(f.jsx)("label",{htmlFor:"description",children:"Description"}),Object(f.jsx)("textarea",{name:"description",id:"description",cols:"38",rows:"3",value:this.state.description,onChange:this.handleChange})]}),Object(f.jsxs)("div",{className:"imageUpload",children:[Object(f.jsx)("label",{className:"imageUploadLabel",htmlFor:"imageUrl",children:Object(f.jsx)("p",{children:"Upload image"})}),Object(f.jsx)("input",{style:{display:"none"},type:"file",id:"imageUrl",name:"imageUrl",value:this.state.fileInputValue,onChange:function(t){return e.handleFileUpload(t)}}),this.state.imageUploaded?Object(f.jsxs)("p",{className:"imageWarning",style:{backgroundColor:"#43c7bea3"},children:[Object(f.jsx)("img",{style:{width:"20px",marginRight:"3px"},src:"/Check_green_icon.svg",alt:"check icon"})," Image uploaded"]}):Object(f.jsxs)("p",{className:"imageWarning",style:{backgroundColor:"#f1466896"},children:[Object(f.jsx)("img",{style:{width:"20px",marginRight:"3px"},src:"/redIcon.png",alt:"check icon"})," Please upload image!"]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"findFormButton",type:"submit",children:"Add Find"}),void 0!==this.state.hunt._id?this.state.finds.length>0?Object(f.jsx)(f.Fragment,{}):Object(f.jsx)("button",{className:"findFormButton",onClick:function(){e.removeSession()},children:"Delete session"}):Object(f.jsx)(f.Fragment,{})]})]}),this.state.finds.length>0?Object(f.jsx)("div",{className:"findLinkWrapper",children:this.state.finds.map((function(e){return Object(f.jsxs)(o.b,{className:"findLink",to:"/finds/".concat(e._id),children:[Object(f.jsxs)("div",{className:"findLinkText",children:[Object(f.jsx)("p",{style:{fontSize:"22px",fontWeight:"bold"},children:e.objectType}),Object(f.jsx)("p",{style:{fontSize:"20px"},children:e.age})]}),Object(f.jsx)("img",{src:e.imageUrl,alt:"find"})]},e._id)}))}):Object(f.jsx)(f.Fragment,{})]}),Object(f.jsx)("div",{children:this.state.finds.length>0?Object(f.jsx)("div",{style:{padding:"100px"},children:Object(f.jsx)(O.Pie,{data:{labels:["uncertain","stone age","bronze age","iron age","roman","early medieval","medieval","post medieval","modern"],datasets:[{label:"Points",backgroundColor:["#f1c40f","#e67e22","#16a085","#2980b9","#78c4d4","#f5c0c0","#7868e6","#f14668","#c0e218"],data:[this.state.finds.filter((function(e){return"uncertain"===e.age})).length,this.state.finds.filter((function(e){return"stone age"===e.age})).length,this.state.finds.filter((function(e){return"bronze age"===e.age})).length,this.state.finds.filter((function(e){return"iron age"===e.age})).length,this.state.finds.filter((function(e){return"roman"===e.age})).length,this.state.finds.filter((function(e){return"early medieval"===e.age})).length,this.state.finds.filter((function(e){return"medieval"===e.age})).length,this.state.finds.filter((function(e){return"post medieval"===e.age})).length,this.state.finds.filter((function(e){return"modern"===e.age})).length]}]},height:400,width:600})}):Object(f.jsx)(f.Fragment,{})})]})}}]),n}(a.Component)),N=(n(238),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={date:"",hunts:[],longitude:"",latitude:""},e.handleChangeDate=function(t){e.setState({date:t.target.value})},e.handleChildChange=function(){g.a.get("/api/locations/".concat(e.props.match.params.id)).then((function(t){e.setState({hunts:t.data.hunts})})).catch((function(e){console.log(e)}))},e.handleChangeDate=function(t){e.setState({date:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),g.a.post("/api/hunts",{date:e.state.date,location:e.props.match.params.id,finds:[]}).then((function(t){e.props.history.push("/locations/".concat(e.props.match.params.id,"/").concat(t.data._id)),g.a.put("/api/locations/".concat(e.props.match.params.id),{hunt:t.data._id}).then((function(){g.a.get("/api/locations/".concat(e.props.match.params.id)).then((function(t){e.setState({hunts:t.data.hunts})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/locations/".concat(this.props.match.params.id)).then((function(t){e.setState({hunts:t.data.hunts,longitude:t.data.longitude,latitude:t.data.latitude})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{onLoad:this.onloadParentComponent,children:[Object(f.jsxs)("div",{className:"latlongDetailSection",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{children:"Latitude:"})," ",this.state.latitude]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{children:"Longitude:"})," ",this.state.longitude]}),Object(f.jsx)("img",{className:"copyIcon",src:"/Edit-copy.svg",alt:"",onClick:function(){navigator.clipboard.writeText(e.state.latitude+","+e.state.longitude)}}),Object(f.jsx)("a",{target:"_blank",rel:"noreferrer",href:"http://maps.google.com/maps?q=".concat(this.state.latitude,",").concat(this.state.longitude),style:{fontSize:"16px"},children:"Look up coordinates on google maps"})]}),Object(f.jsxs)("div",{style:{display:"flex",gap:"40px"},children:[Object(f.jsxs)("div",{className:"sessionsListContainer",children:[Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("input",{onChange:this.handleChangeDate,type:"datetime-local",name:"",id:""}),Object(f.jsx)("button",{className:"addSessionButton",type:"submit",children:"Add Session"})]})}),Object(f.jsxs)("div",{className:"sessionsList",children:[this.state.hunts.length>0?Object(f.jsx)(o.b,{id:"allfinds",className:"sessionDetail",to:"".concat(this.props.match.url,"/allfinds"),children:"All finds in this location"}):Object(f.jsx)(f.Fragment,{}),this.state.hunts.length>0?this.state.hunts.map((function(t){return Object(f.jsxs)(o.b,{id:t._id,className:"sessionDetail",to:"".concat(e.props.match.url,"/").concat(t._id),children:["Day: ",t.date.split("T")[0].split("-").reverse().join("-")," Time: ",t.date.split("T")[1]]},t._id)})):Object(f.jsx)(f.Fragment,{})]})]}),Object(f.jsxs)(j.d,{children:[Object(f.jsx)(j.b,{path:"".concat(this.props.match.path,"/allfinds"),render:function(e){return Object(f.jsx)(v,Object(l.a)({},e))}}),Object(f.jsx)(j.b,{path:"".concat(this.props.match.path,"/:sessionId"),render:function(t){return Object(f.jsx)(C,Object(l.a)(Object(l.a)({},t),{},{onReload:function(){e.handleChildChange()}}),t.match.params.sessionId)}})]})]})]})}}]),n}(a.Component)),S=function(e,t,n,a){return g.a.post("/api/auth/signup",{username:e,password:t,longitude:n,latitude:a}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},w=function(e,t){return g.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},k=(n(239),function(e){g.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))}),U=function(e){return Object(f.jsxs)("div",{className:"navbar",children:[Object(f.jsx)("h1",{className:"appName",children:"Finds.db"}),e.user?Object(f.jsxs)("div",{className:"navLinksWrap",children:[Object(f.jsx)("div",{children:Object(f.jsx)(o.b,{className:"navLink",to:"/locations",children:"Locations"})}),Object(f.jsx)("div",{children:Object(f.jsx)(o.b,{className:"navLink",to:"/finds",children:"Finds"})}),Object(f.jsx)("div",{children:Object(f.jsx)(o.b,{className:"navLink",to:"/login",onClick:function(){return k(e)},children:"Logout"})})]}):Object(f.jsxs)("div",{className:"navLinksWrap",children:[Object(f.jsx)("div",{children:Object(f.jsx)(o.b,{className:"navLink",to:"/signup",children:"Signup"})}),Object(f.jsx)("div",{children:Object(f.jsx)(o.b,{className:"navLink",to:"/login",children:"Login"})})]})]})},D=(n(240),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={username:"",password:"",message:"",longitude:"",latitude:""},e.handleChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState(Object(y.a)({},a,i))},e.handleSubmit=function(t){t.preventDefault(),e.setState({message:""});var n=e.state,a=n.username,i=n.password,s=n.longitude,c=n.latitude;S(a,i,s,c).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/locations"))}))},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{className:"imageDiv"}),Object(f.jsx)("div",{className:"signUpFormWrap",children:Object(f.jsxs)("form",{onSubmit:this.handleSubmit,className:"signUpForm",children:[Object(f.jsx)("h2",{children:"Signup"}),Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"}),Object(f.jsx)("label",{htmlFor:"longitude",children:"Fill in latitude and longitude to center map"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"number",name:"latitude",id:"latitude",placeholder:"latitude",value:this.state.latitude,onChange:this.handleChange}),Object(f.jsx)("input",{type:"number",name:"longitude",id:"longitude",placeholder:"longitude",value:this.state.longitude,onChange:this.handleChange})]}),Object(f.jsx)("button",{className:"signUpButton",type:"submit",children:"Signup"}),this.state.message&&Object(f.jsx)("h4",{children:this.state.message})]})})]})}}]),n}(a.Component)),L=(n(241),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={username:"",password:"",message:""},e.handleChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState(Object(y.a)({},a,i))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,i=n.password;w(a,i).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/locations"))}))},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{className:"imageDivLogin"}),Object(f.jsx)("div",{className:"loginFormWrap",children:Object(f.jsxs)("form",{onSubmit:this.handleSubmit,className:"loginForm",children:[Object(f.jsx)("h2",{children:"Login"}),Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"}),Object(f.jsx)("button",{type:"submit",className:"loginButton",children:"Login"}),this.state.message&&Object(f.jsx)("h4",{children:this.state.message})]})})]})}}]),n}(a.Component)),F=(n(242),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={finds:[],filter:"",age:"all"},e.componentDidMount=function(){g.a.get("/api/finds").then((function(t){console.log(t.data);var n=t.data.filter((function(t){return t.location.owner===e.props.user._id})).reverse();e.setState({finds:n})}))},e.changeHandler=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(y.a)({},n,a))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsxs)("div",{className:"filterSection",children:[Object(f.jsx)("input",{type:"text",name:"filter",value:this.state.filter,onChange:this.changeHandler}),Object(f.jsxs)("select",{name:"age",value:this.state.age,onChange:this.changeHandler,children:[Object(f.jsx)("option",{value:"all",children:"all"}),Object(f.jsx)("option",{value:"uncertain",children:"uncertain"}),Object(f.jsx)("option",{value:"stone age",children:"stone age"}),Object(f.jsx)("option",{value:"bronze age",children:"bronze age"}),Object(f.jsx)("option",{value:"iron age",children:"iron age"}),Object(f.jsx)("option",{value:"roman",children:"roman"}),Object(f.jsx)("option",{value:"early medieval",children:"early medieval"}),Object(f.jsx)("option",{value:"medieval",children:"medieval"}),Object(f.jsx)("option",{value:"post medieval",children:"post medieval"}),Object(f.jsx)("option",{value:"modern",children:"modern"})]})]}),Object(f.jsx)("div",{className:"allfindLinkWrapper",children:this.state.finds.length>0?this.state.finds.filter((function(t){return t.objectType.toLowerCase().includes(e.state.filter.toLocaleLowerCase())||t.description.toLowerCase().includes(e.state.filter.toLocaleLowerCase())})).filter((function(t){return t.age===e.state.age||"all"===e.state.age})).map((function(e){return Object(f.jsxs)(o.b,{className:"allfindLink",to:"/finds/".concat(e._id),children:[Object(f.jsxs)("div",{className:"allfindLinkText",children:[Object(f.jsx)("p",{style:{fontSize:"22px",fontWeight:"bold"},children:e.objectType}),Object(f.jsx)("p",{style:{fontSize:"20px"},children:e.age})]}),Object(f.jsx)("img",{style:{width:"200px"},src:e.imageUrl,alt:"find"})]},e._id)})):Object(f.jsx)(f.Fragment,{})})]})}}]),n}(a.Component)),T=(n(243),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={find:{},showEdit:"",age:"",description:"",imageUrl:"",objectType:""},e.componentDidMount=function(){g.a.get("/api/finds/".concat(e.props.match.params.id)).then((function(t){e.setState({find:t.data,showEdit:!1,age:t.data.age,description:t.data.description,imageUrl:t.data.imageUrl,objectType:t.data.objectType})})).catch((function(e){console.log(e)}))},e.handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(y.a)({},n,a))},e.cancelEdit=function(){e.setState((function(e){return{showEdit:!1,age:e.find.age,description:e.find.description,imageUrl:e.find.imageUrl,objectType:e.find.objectType}}))},e.handleFileUpload=function(t){var n=new FormData;n.append("imageUrl",t.target.files[0]),g.a.post("/api/upload",n).then((function(t){return e.setState({imageUrl:t.data.secure_url})})).catch((function(e){console.log(e)}))},e.handleSubmit=function(t){t.preventDefault(),g.a.put("/api/finds/".concat(e.props.match.params.id),{objectType:e.state.objectType,age:e.state.age,description:e.state.description,imageUrl:e.state.imageUrl}).then((function(){window.location.reload()})).catch((function(e){console.log(e)}))},e.deleteFind=function(){g.a.delete("/api/finds/".concat(e.props.match.params.id)).then((function(){g.a.put("/api/hunts/removeFind/".concat(e.state.find.hunt),{find:e.props.match.params.id}).then((function(){e.props.history.goBack()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:""!==this.state.age?this.state.showEdit?Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"findDetailWrapper",children:[Object(f.jsxs)("form",{onSubmit:this.handleSubmit,style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"10px",width:"20vw"},children:[Object(f.jsx)("label",{className:"findDetailLabel",children:"Type"}),Object(f.jsx)("input",{type:"text",name:"objectType",value:this.state.objectType,onChange:this.handleChange}),Object(f.jsx)("label",{className:"findDetailLabel",children:"Period"}),Object(f.jsxs)("select",{name:"age",id:"age",value:this.state.age,onChange:this.handleChange,children:[Object(f.jsx)("option",{value:"uncertain",children:"uncertain"}),Object(f.jsx)("option",{value:"stone age",children:"stone age"}),Object(f.jsx)("option",{value:"bronze age",children:"bronze age"}),Object(f.jsx)("option",{value:"iron age",children:"iron age"}),Object(f.jsx)("option",{value:"roman",children:"roman"}),Object(f.jsx)("option",{value:"early medieval",children:"early medieval"}),Object(f.jsx)("option",{value:"medieval",children:"medieval"}),Object(f.jsx)("option",{value:"post medieval",children:"post medieval"}),Object(f.jsx)("option",{value:"modern",children:"modern"})]}),Object(f.jsx)("label",{className:"findDetailLabel",children:"Description"}),Object(f.jsx)("textarea",{name:"description",id:"",cols:"21",rows:"1",value:this.state.description,onChange:this.handleChange}),Object(f.jsx)("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"locationDetailButton",type:"submit",children:"Submit"}),Object(f.jsx)("button",{className:"locationDetailButton",onClick:this.cancelEdit,children:"Cancel"})]})]}),Object(f.jsx)("img",{src:this.state.imageUrl,alt:"find"})]})}):Object(f.jsxs)("div",{className:"findDetailWrapper",children:[Object(f.jsxs)("div",{style:{width:"20vw"},children:[Object(f.jsx)("label",{className:"findDetailLabel",children:"Type"}),Object(f.jsx)("p",{children:this.state.find.objectType}),Object(f.jsx)("label",{className:"findDetailLabel",children:"Period"}),Object(f.jsx)("p",{children:this.state.find.age}),Object(f.jsx)("label",{className:"findDetailLabel",children:"Description"}),Object(f.jsx)("p",{children:""===this.state.find.description?"No description":this.state.description}),Object(f.jsx)("button",{className:"locationDetailButton",onClick:function(){e.setState({showEdit:!0})},children:"Edit"}),Object(f.jsx)("button",{className:"locationDetailButton",onClick:this.deleteFind,children:"Delete"}),Object(f.jsx)("button",{className:"locationDetailButton",onClick:function(){return e.props.history.goBack()},children:"back"})]}),Object(f.jsx)("img",{src:this.state.find.imageUrl,alt:"find"})]}):Object(f.jsx)(f.Fragment,{})})}}]),n}(a.Component)),_=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e.componentDidMount=function(){},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(U,{user:this.state.user,setUser:this.setUser}),Object(f.jsx)(j.b,{exact:!0,path:"/",children:Object(f.jsx)(j.a,{to:"/locations"})}),Object(f.jsx)(j.b,{exact:!0,path:"/locations",render:function(t){return e.state.user?Object(f.jsx)(x,Object(l.a)({user:e.state.user},t)):Object(f.jsx)(j.a,{to:"/login"})}}),Object(f.jsx)(j.b,{path:"/locations/:id",render:function(t){return e.state.user?Object(f.jsx)(N,Object(l.a)({},t)):Object(f.jsx)(j.a,{to:"/login"})}}),Object(f.jsx)(j.b,{exact:!0,path:"/finds",render:function(t){return e.state.user?Object(f.jsx)(F,Object(l.a)({user:e.state.user},t)):Object(f.jsx)(j.a,{to:"/login"})}}),Object(f.jsx)(j.b,{exact:!0,path:"/finds/:id",render:function(t){return e.state.user?Object(f.jsx)(T,Object(l.a)({},t)):Object(f.jsx)(j.a,{to:"/login"})}}),Object(f.jsx)(j.b,{exact:!0,path:"/signup",render:function(t){return Object(f.jsx)(D,Object(l.a)({setUser:e.setUser},t))}}),Object(f.jsx)(j.b,{exact:!0,path:"/login",render:function(t){return Object(f.jsx)(L,Object(l.a)({setUser:e.setUser},t))}})]})}}]),n}(i.a.Component);g.a.get("/api/auth/loggedin").then((function(e){var t=e.data;c.a.render(Object(f.jsx)(o.a,{children:Object(f.jsx)(_,{user:t})}),document.getElementById("root"))}))}},[[244,1,2]]]);
//# sourceMappingURL=main.b555b379.chunk.js.map